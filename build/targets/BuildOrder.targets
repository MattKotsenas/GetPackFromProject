<Project>

  <Target Name="BuildProjectDependencies" BeforeTargets="PrepareForBuild" Condition="'@(ProjectDependency)' != ''">
    <!-- Replace this custom logic with https://github.com/dotnet/msbuild/issues/4795 when available -->
    <Message Text="Building project order-only dependencies: @(ProjectDependency)" Importance="normal" />
    <MSBuild
      Projects="@(ProjectDependency)"
      RemoveProperties="TargetFramework;TargetFrameworks"
      BuildInParallel="$(BuildInParallel)"
      Targets="Restore;Build" />
  </Target>

</Project>
